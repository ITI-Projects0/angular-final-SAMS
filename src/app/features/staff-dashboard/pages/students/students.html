<section class="students-wrapper">
  <!-- Header + Search + Filters -->
  <div class="header-row">
    <div>
      <h2 class="title">Students</h2>
      <p class="subtitle">
        Showing {{ filteredStudents.length }} of {{ students.length }} students
      </p>
    </div>

    <div class="search-box">
      <div class="search-inner">
        <span class="search-icon">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <circle cx="11" cy="11" r="6" stroke-width="2"></circle>
            <line x1="16.5" y1="16.5" x2="20" y2="20" stroke-width="2" stroke-linecap="round"></line>
          </svg>
        </span>
        <input type="text" [(ngModel)]="searchText" class="search-input"
          placeholder="Search by name, role or status..." />
      </div>
    </div>
  </div>

  <!-- Filters row -->
  <div class="filters-row">
    <button class="filter-btn" [class.active]="statusFilter === 'All'" (click)="setStatusFilter('All')">
      All
    </button>

    <button class="filter-btn" [class.active]="statusFilter === 'Acceptable'" (click)="setStatusFilter('Acceptable')">
      Acceptable
    </button>

    <button class="filter-btn" [class.active]="statusFilter === 'Pending'" (click)="setStatusFilter('Pending')">
      Pending
    </button>

    <button class="filter-btn" [class.active]="statusFilter === 'Unacceptable'"
      (click)="setStatusFilter('Unacceptable')">
      Unacceptable
    </button>
  </div>

  <!-- Table Card -->
  <div class="table-card">
    <div class="table-scroll">
      <table class="students-table">
        <thead>
          <tr>
            <th>Name</th>
            <th class="centered">Age</th>
            <th class="centered">Status</th>
            <th class="centered">Date</th>
            <th class="centered">Actions</th>
          </tr>
        </thead>

        <tbody>
          <tr *ngFor="let s of paginatedStudents" class="table-row">
            <td>
              <div class="student-cell">
                <div class="avatar-wrapper">
                  <img [src]="s.avatar" [alt]="s.name" loading="lazy" />
                </div>
                <div class="student-info">
                  <p class="student-name">{{ s.name }}</p>
                  <p class="student-role">{{ s.role }}</p>
                </div>
              </div>
            </td>

            <td class="centered strong">
              {{ s.age }}
            </td>

            <td class="centered">
              <span [ngClass]="getStatusClasses(s.status)">
                {{ s.status }}
              </span>
            </td>

            <td class="centered date">
              {{ s.date }}
            </td>

            <td class="centered">
              <button class="view-btn" [routerLink]="['/dashboard/staff/students', s.id]">
                View
              </button>
            </td>

          </tr>

          <tr *ngIf="paginatedStudents.length === 0">
            <td colspan="5" class="empty-row">
              No students match your filters.
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Pagination -->
    <div class="pagination-row" *ngIf="filteredStudents.length > 0">
      <button class="page-btn" [disabled]="currentPage === 1" (click)="prevPage()">
        ‹ Prev
      </button>

      <span class="page-info">
        Page {{ currentPage }} of {{ totalPages }}
      </span>

      <button class="page-btn" [disabled]="currentPage === totalPages" (click)="nextPage()">
        Next ›
      </button>
    </div>
  </div>
</section>
