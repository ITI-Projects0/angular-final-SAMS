<section class="page-container settings-wrapper">
  <header class="settings-header">
    <div>
      <h2 class="settings-title">Settings</h2>
      <p class="settings-subtitle">Manage your account, appearance, notifications and security.</p>
    </div>

    <div class="pill-badge">
      <span class="dot"></span>
      Active
    </div>
  </header>

  <div class="settings-layout">
    <div class="settings-column">
      <section class="settings-card">
        <div class="card-header">
          <h3>Account</h3>
          <p>Basic information about your profile.</p>
        </div>

        <div class="account-row">
          <div class="avatar-block">
            <div class="avatar">
              <img [src]="avatarPreview || user.avatar" [alt]="user.name" />
            </div>
            <label class="upload-area">
              <span>Upload new photo</span>
              <input type="file" accept="image/*" (change)="onAvatarSelected($event)" />
            </label>
          </div>

          <div class="account-fields">
            <div class="field">
              <label>Name</label>
              <input type="text" [(ngModel)]="user.name" />
            </div>

            <div class="field">
              <label>Email</label>
              <input type="email" [(ngModel)]="user.email" />
            </div>

            <div class="field">
              <label>Roles</label>
              <input type="text" [ngModel]="rolesInput" (ngModelChange)="onRolesInputChange($event)"
                placeholder="admin, teacher" />
            </div>

            <div class="actions-right">
              <button type="button" class="btn-primary" (click)="saveAccount()">
                Save account
              </button>
            </div>
          </div>
        </div>
      </section>

      <section class="settings-card">
        <div class="card-header">
          <h3>Security</h3>
          <p>Control password and extra protection.</p>
        </div>

        <div class="field-inline">
          <div>
            <p class="toggle-title">Password</p>
            <p class="toggle-sub">Change your account password.</p>
          </div>
          <button type="button" class="btn-secondary" (click)="changePassword()">
            Change password
          </button>
        </div>

        <div class="toggle-row">
          <div>
            <p class="toggle-title">Two-factor authentication</p>
            <p class="toggle-sub">Add extra security to your account.</p>
          </div>
          <label class="toggle">
            <input type="checkbox" [(ngModel)]="security.twoFactor" />
            <span class="toggle-slider"></span>
          </label>
        </div>

        <div class="security-footer">
          <p class="danger-title">Danger zone</p>
          <p class="danger-text">Deactivate your account or request data removal.</p>
          <button type="button" class="btn-danger small">Deactivate account</button>
        </div>
      </section>
    </div>

    <div class="settings-column">
      <section class="settings-card">
        <div class="card-header">
          <h3>Preferences</h3>
          <p>Control appearance, language and layout.</p>
        </div>

        <div class="field">
          <label>Theme</label>
          <div style="display:flex;gap:.5rem;align-items:center">
            <select [(ngModel)]="preferences.theme" (ngModelChange)="onThemeChange($event)">
              <option value="light">Light</option>
              <option value="dark">Dark</option>
              <option value="system">System default</option>
            </select>
            <div style="display:flex;gap:.4rem">
              <button type="button" class="btn-secondary small" (click)="onThemeChange('light')">Light</button>
              <button type="button" class="btn-secondary small" (click)="onThemeChange('dark')">Dark</button>
            </div>
          </div>
        </div>



        <div class="toggle-row">
          <div>
            <p class="toggle-title">24-hour time</p>
            <p class="toggle-sub">Show time in 24h format (13:00).</p>
          </div>
          <label class="toggle">
            <input type="checkbox" [(ngModel)]="preferences.use24hTime" />
            <span class="toggle-slider"></span>
          </label>
        </div>

        <div class="toggle-row">
          <div>
            <p class="toggle-title">Compact sidebar</p>
            <p class="toggle-sub">Reduce spacing in the left navigation.</p>
          </div>
          <label class="toggle">
            <input type="checkbox" [(ngModel)]="preferences.compactSidebar" />
            <span class="toggle-slider"></span>
          </label>
        </div>

        <div class="actions-right">
          <button type="button" class="btn-primary" (click)="savePreferences()">
            Save preferences
          </button>
        </div>
      </section>

      <section class="settings-card">
        <div class="card-header">
          <h3>Notifications</h3>
          <p>How you get notified about updates.</p>
        </div>

        <div class="toggle-row">
          <div>
            <p class="toggle-title">Email notifications</p>
            <p class="toggle-sub">Receive updates on your email.</p>
          </div>
          <label class="toggle">
            <input type="checkbox" [(ngModel)]="notifications.email" />
            <span class="toggle-slider"></span>
          </label>
        </div>

        <div class="toggle-row">
          <div>
            <p class="toggle-title">SMS notifications</p>
            <p class="toggle-sub">Use SMS for critical alerts.</p>
          </div>
          <label class="toggle">
            <input type="checkbox" [(ngModel)]="notifications.sms" />
            <span class="toggle-slider"></span>
          </label>
        </div>

        <div class="toggle-row">
          <div>
            <p class="toggle-title">In-app notifications</p>
            <p class="toggle-sub">Show notifications inside the dashboard.</p>
          </div>
          <label class="toggle">
            <input type="checkbox" [(ngModel)]="notifications.inApp" />
            <span class="toggle-slider"></span>
          </label>
        </div>

        <div class="toggle-row">
          <div>
            <p class="toggle-title">Attendance alerts</p>
            <p class="toggle-sub">Alert when student absence increases.</p>
          </div>
          <label class="toggle">
            <input type="checkbox" [(ngModel)]="notifications.attendanceAlerts" />
            <span class="toggle-slider"></span>
          </label>
        </div>

        <div class="actions-right">
          <button type="button" class="btn-primary" (click)="saveNotifications()">
            Save notifications
          </button>
        </div>
      </section>
    </div>
  </div>
</section>
