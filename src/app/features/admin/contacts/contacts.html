<section class="list-wrapper">
  <header class="list-header">
    <h2>Contact Messages</h2>
    <p class="muted">Messages received from the contact form</p>
  </header>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-state">
    <div class="spinner"></div>
    <p>Loading messages...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="errorMessage && !isLoading" class="error-state">
    <p>{{ errorMessage }}</p>
    <button class="btn-primary" (click)="loadContacts()">Try Again</button>
  </div>

  <!-- Empty State -->
  <div *ngIf="!isLoading && !errorMessage && contacts.length === 0" class="empty-state">
    <svg class="empty-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
        d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
    </svg>
    <p>No contact messages yet</p>
  </div>

  <!-- Contacts Table -->
  <div *ngIf="!isLoading && !errorMessage && contacts.length > 0" class="table-container">
    <table class="contacts-table">
      <thead>
        <tr>
          <th>Name</th>
          <th>Email</th>
          <th>Subject</th>
          <th>Message</th>
          <th>Date</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let contact of contacts">
          <td class="name-cell">{{ contact.name }}</td>
          <td class="email-cell">
            <a [href]="'mailto:' + contact.email">{{ contact.email }}</a>
          </td>
          <td class="subject-cell">{{ contact.subject || 'â€”' }}</td>
          <td class="message-cell">
            <div class="message-preview" [title]="contact.message">
              {{ contact.message }}
            </div>
          </td>
          <td class="date-cell">{{ formatDate(contact.created_at) }}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Pagination -->
  <div class="pagination" *ngIf="lastPage > 1 || total">
    <div class="muted small">Showing {{ rangeStart }} - {{ rangeEnd }} of {{ total }}</div>
    <div class="page-controls">
      <button class="btn-simple" [disabled]="page === 1" (click)="changePage(page - 1)">Prev</button>
      <span class="page-indicator">Page {{ page }} / {{ lastPage }}</span>
      <button class="btn-simple" [disabled]="page === lastPage" (click)="changePage(page + 1)">Next</button>
    </div>
  </div>
</section>